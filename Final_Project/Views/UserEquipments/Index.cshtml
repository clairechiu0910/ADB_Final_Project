@using Microsoft.AspNetCore.Http;
@{
    var username = Context.Session.GetString("UserName");
}

<div class="wrapper">
    <div class="equipment-background">
        <div class="filter-black"></div>
    </div>
    <div class="profile-content section-nude">
        <div class="container">
            <div class="row owner">
                <!--<div class="col-md-2 col-md-offset-5 col-sm-4 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-left">-->
                <div class="Equipment Schedule">
                    <h4>UserName: @username<br /></h4>
                </div>
                <!--</div>-->
                <!--<div class="col-md-2 col-md-offset-5 col-sm-4 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-left">-->
                <div id="app_user_equipments">
                    <h5>User Equipment Details<br /></h5>
                    <ul>
                        <li>
                            # If low_dec < 0, the observable declination range is +90 ~ low_dec.
                        </li>
                        <li>
                            # If low_dec > 0, the observable declination range is low_dec ~ -90.
                        </li>
                    </ul>
                    <div style="overflow-x:auto;">
                        <table class="table2">
                            <tr>
                                <th>EID</th>
                                <th>Site</th>
                                <th>Longtitude</th>
                                <th>Latitude</th>
                                <th>Altitude</th>
                                <th>Time_zone</th>
                                <th>Daylight_saving</th>
                                <th>Water_vapor</th>
                                <th>Light_pollution(m/sas)</th>
                                <th>Declination Limit</th>
                            </tr>
                            <tr v-for="item_1 in uHaveE">
                                <td>{{item_1.eid}}</td>
                                <td>{{item_1.site}}</td>
                                <td class="text-right number">{{item_1.longitude}}</td>
                                <td class="text-right number">{{item_1.latitude}}</td>
                                <td class="text-right number">{{item_1.altitude}}</td>
                                <td>{{item_1.timeZone}}</td>
                                <td>{{item_1.daylightSaving}}</td>
                                <td class="text-right number">{{item_1.waterVapor}}</td>
                                <td class="text-right number">{{item_1.lightPollution}}</td>
                                <td class="text-right number">{{item_1.declinationLimit}}</td>
                            </tr>
                        </table>
                    </div>
                    <br />
                    <button onclick="Compute()" class="btn btn-fill">Compute Declination</button>
                    <h5>Equipment Details<br /></h5>
                    <div style="overflow-x:auto;">
                        <table class="table2">
                            <tr>
                                <th>EID</th>
                                <th>Aperture</th>
                                <th>FoV</th>
                                <th>Pixel scale ("/pix)</th>
                                <th>Tracking accuracy</th>
                                <th>Limiting magnitude (mag)</th>
                                <th>Elevation limit (deg)</th>
                                <th>Mount type (german, fork, theodolite)</th>
                                <th>Camera type (colored, mono)</th>
                                <th>Camera type (cooled, uncooled)	</th>
                                <th>Johnson B</th>
                                <th>Johnson V</th>
                                <th>Johnson R</th>
                                <th>SDSS u</th>
                                <th>SDSS g</th>
                                <th>SDSS r</th>
                                <th>SDSS i</th>
                                <th>SDSS z</th>
                            </tr>
                            <tr v-for="item_1 in equipments">
                                <td>{{item_1.eid}}</td>
                                <td class="text-right number">{{item_1.aperture}}</td>
                                <td class="text-right number">{{item_1.foV}}</td>
                                <td class="text-right number">{{item_1.pixelScale}}</td>
                                <td class="text-right number">{{item_1.trackingAccuracy}}</td>
                                <td class="text-right number">{{item_1.limitingMagnitude}}</td>
                                <td class="text-right number">{{item_1.elevationLimit}}</td>
                                <td>{{item_1.mountType}}</td>
                                <td>{{item_1.cameraType_1}}</td>
                                <td>{{item_1.cameraType_2}}</td>
                                <td>{{item_1.johnson_B}}</td>
                                <td>{{item_1.johnson_V}}</td>
                                <td>{{item_1.johnson_R}}</td>
                                <td>{{item_1.sdsS_u}}</td>
                                <td>{{item_1.sdsS_g}}</td>
                                <td>{{item_1.sdsS_r}}</td>
                                <td>{{item_1.sdsS_i}}</td>
                                <td>{{item_1.sdsS_z}}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="footer-demo section-nude">
    <div class="container">
        <div class="copyright text-center">
            &copy; 2020 - Final_Project
        </div>
    </div>
</footer>

<script>
    fetch('@Url.Action("GetUserEquipments", "UserEquipments")')
        .then(function (response) {
            response.json().then(function (data) {
                app_user_equipments._data.equipments = data;
                console.log(app_user_equipments._data.equipments);
            });
        });

    fetch('@Url.Action("GetUHaveE", "UHaveE")')
        .then(function (response) {
            response.json().then(function (data) {
                app_user_equipments._data.uHaveE = data;
                console.log(app_user_equipments._data.uHaveE);
            });
        });

    var app_user_equipments = new Vue({
        el: '#app_user_equipments',
        data: {
            equipments: null,
            uHaveE: null
        }
    });
    function Compute() {
        console.log("in join");
        location.href = '@Url.Action("Compute", "UHaveE")';
    }
</script>